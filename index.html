<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover" />
  <title>SYGN1L</title>

  <style>
    :root{
      --bg0:#040707;
      --bg1:#020404;

      --text:#DFFFE8;
      --muted:rgba(223,255,232,.72);

      --p0:#39FF6A; /* P1 green */
      --p1:#58FFAE; /* P2 mint */
      --p2:#7EF7FF; /* P3 cyan */
      --p3:#A6FFF1; /* P4 icy */
      --p4:#FF6BE5; /* P5 magenta */
      --p5:#FF3B6B; /* P6 red */

      --accent: var(--p0);

      --radius:16px;
      --shadow:0 14px 34px rgba(0,0,0,.72);
      --border: rgba(160,255,210,.14);

      --glowSoft: 0 0 14px rgba(57,255,106,.18);
      --glowHard: 0 0 24px rgba(57,255,106,.28);

      --danger:#FF3B6B;
    }

    html{ background:var(--bg0); -webkit-text-size-adjust:100%; }
    body{
      margin:0;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 60% 10%, rgba(57,255,106,.10), transparent 60%),
        radial-gradient(700px 520px at 15% 30%, rgba(0,0,0,.35), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      overflow-y:auto;
      -webkit-overflow-scrolling:touch;
      touch-action:manipulation;
      padding:14px 12px calc(24px + env(safe-area-inset-bottom));
    }

    /* vignette */
    body::before{
      content:"";
      position:fixed; inset:0;
      pointer-events:none;
      background: radial-gradient(1200px 900px at 50% 50%, rgba(0,0,0,0) 55%, rgba(0,0,0,.72) 100%);
      z-index:0;
    }

    /* scanlines */
    .fx{ position:fixed; inset:0; pointer-events:none; z-index:0; }
    .fx.scanlines{
      background:repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.05),
        rgba(255,255,255,.05) 1px,
        rgba(0,0,0,0) 4px,
        rgba(0,0,0,0) 8px
      );
      opacity:.14;
      mix-blend-mode:screen;
    }

    .wrap{
      position:relative; z-index:1;
      max-width:860px;
      margin:0 auto;
      display:grid;
      gap:18px;
    }

    .card{
      border:1px solid var(--border);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      background:
        linear-gradient(180deg, rgba(0,0,0,.58), rgba(0,0,0,.36)),
        radial-gradient(1200px 800px at 50% 0%, rgba(255,255,255,.06), transparent 55%);
      overflow:hidden;
      position:relative;
    }
    .card::after{
      content:"";
      position:absolute; inset:-2px;
      pointer-events:none;
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.05),
        inset 0 0 26px rgba(0,0,0,.55);
    }

    .pad{ padding:14px; position:relative; }

    h1{
      margin:0;
      letter-spacing:.25em;
      font-size:18px;
    }
    .subtitle{
      margin-top:6px;
      font-size:12px;
      color:var(--muted);
      letter-spacing:.06em;
    }

    .stats{
      margin-top:12px;
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    @media(min-width:420px){ .stats{ grid-template-columns:repeat(3,1fr); } }

    .stat{
      border:1px solid rgba(255,255,255,.06);
      border-radius:12px;
      padding:10px;
      background:rgba(0,0,0,.38);
    }
    .stat .k{
      font-size:11px;
      color:rgba(223,255,232,.60);
      letter-spacing:.10em;
      text-transform:uppercase;
    }
    .stat .v{
      margin-top:6px;
      font-size:18px;
      overflow-wrap:anywhere;
      color:rgba(223,255,232,.96);
      text-shadow:0 0 10px rgba(0,0,0,.55);
    }

    .hd{
      display:flex;
      justify-content:space-between;
      align-items:center;
      flex-wrap:wrap;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.06);
      background:linear-gradient(180deg, rgba(0,0,0,.30), rgba(0,0,0,0));
      position:relative;
    }

    .chip{
      border:1px solid rgba(255,255,255,.08);
      border-radius:999px;
      padding:6px 10px;
      font-size:10px;
      letter-spacing:.14em;
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:rgba(0,0,0,.38);
      white-space:nowrap;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
    }
    .chip.clickable{ cursor:pointer; }
    .dot{
      width:8px;height:8px;border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 20px rgba(57,255,106,.30);
    }

    .muted{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
      line-height:1.45;
    }

    button{
      font:inherit;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.32);
      color:rgba(223,255,232,.94);
      padding:14px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color:transparent;
      transition:.15s;
    }
    button:hover{ box-shadow:0 0 14px rgba(57,255,106,.15); }
    button:active{ transform:translateY(1px); }
    button:disabled{ opacity:.45; cursor:not-allowed; box-shadow:none; filter:saturate(.85); }

    .big{
      width:100%;
      font-weight:900;
      letter-spacing:.14em;
      font-size:18px;
      padding:18px 14px;
      background:linear-gradient(180deg, rgba(57,255,106,.14), rgba(0,0,0,.34));
      box-shadow: inset 0 0 0 1px rgba(57,255,106,.14), 0 10px 26px rgba(0,0,0,.45);
    }

    .grid2{ display:grid; gap:10px; margin-top:12px; }
    @media(min-width:420px){ .grid2{ grid-template-columns:1fr 1fr; } }

    .bar{
      height:10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(0,0,0,.28);
      overflow:hidden;
    }
    .fill{
      height:100%;
      width:0%;
      background:linear-gradient(90deg, rgba(57,255,106,.55), rgba(57,255,106,.18));
      box-shadow:0 0 16px rgba(57,255,106,.18);
    }
    .fill.danger{
      background:linear-gradient(90deg, rgba(255,59,107,.62), rgba(255,59,107,.18));
      box-shadow:0 0 16px rgba(255,59,107,.20);
    }

    /* scope panel */
    .scopeWrap{
      margin-top:10px;
      border:1px solid rgba(255,255,255,.08);
      border-radius:12px;
      background:rgba(0,0,0,.40);
      overflow:hidden;
    }
    .scopeTop{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding:8px 10px;
      border-bottom:1px solid rgba(255,255,255,.06);
      font-size:10px;
      letter-spacing:.12em;
      color:rgba(223,255,232,.90);
    }
    .scopeMeta{
      color:var(--muted);
      letter-spacing:.10em;
      text-transform:uppercase;
    }
    canvas#scope{
      display:block;
      width:100%;
      height:84px;
      background:rgba(0,0,0,.25);
    }

    /* upgrades list */
    .upgrades{ display:flex; flex-direction:column; gap:12px; }
    .up{
      border:1px solid rgba(255,255,255,.08);
      border-radius:14px;
      padding:12px;
      background:rgba(0,0,0,.38);
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      align-items:center;
      position:relative;
    }
    .up.afford{
      border-color: rgba(57,255,106,.26);
      box-shadow:0 0 14px rgba(57,255,106,.14);
    }
    .up.locked{ opacity:.60; border-style:dashed; }

    .up .meta{ flex:1; min-width:220px; }
    .up .name{ font-weight:900; letter-spacing:.04em; }
    .up .desc,.up .cost{ font-size:12px; margin-top:6px; color:var(--muted); }
    .up .cost{ color:rgba(223,255,232,.88); }

    /* logs */
    .log{
      max-height:320px;
      overflow:auto;
      -webkit-overflow-scrolling:touch;
    }
    .log p{
      margin:0 0 10px;
      font-size:12px;
      line-height:1.55;
      color:rgba(223,255,232,.90);
    }
    .tag{
      display:inline-block;
      padding:2px 8px;
      border:1px solid rgba(255,255,255,.10);
      border-radius:999px;
      font-size:10px;
      letter-spacing:.10em;
      color:rgba(223,255,232,.92);
      margin-right:8px;
    }

    /* popups */
    .popHost{
      position:fixed;
      top:12px;
      left:12px;
      right:12px;
      z-index:999;
      display:flex;
      flex-direction:column;
      gap:10px;
      pointer-events:none;
    }
    .pop{
      pointer-events:auto;
      max-width:860px;
      margin:0 auto;
      border:1px solid rgba(57,255,106,.26);
      border-radius:14px;
      background:rgba(0,0,0,.80);
      box-shadow:0 14px 34px rgba(0,0,0,.62), 0 0 20px rgba(57,255,106,.12);
      padding:10px 12px;
      animation: popin .14s ease-out;
      cursor:pointer;
      user-select:none;
    }
    @keyframes popin{ from{ transform:translateY(-6px); opacity:0; } to{ transform:translateY(0); opacity:1; } }
    .pop .who{
      font-size:10px;
      letter-spacing:.14em;
      color:rgba(126,219,146,.95);
      margin-bottom:6px;
      text-transform:uppercase;
    }
    .pop .msg{
      font-size:12px;
      line-height:1.5;
      color:rgba(223,255,232,.94);
    }
    .pop .hint{
      margin-top:6px;
      font-size:10px;
      color:rgba(223,255,232,.58);
      letter-spacing:.12em;
      text-transform:uppercase;
    }

    /* modal */
    .modalBack{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding:14px;
      z-index:1000;
      background:rgba(0,0,0,.66);
    }
    .modal{
      width:min(860px, 100%);
      max-height:min(78vh, 720px);
      overflow:auto;
      -webkit-overflow-scrolling:touch;
      border-radius:16px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.82);
      box-shadow:0 18px 50px rgba(0,0,0,.70);
    }
    .modalHd{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:12px 14px;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .modalTitle{
      font-weight:900;
      letter-spacing:.14em;
      font-size:12px;
      color:rgba(223,255,232,.92);
      text-transform:uppercase;
    }
    .modalBody{
      padding:14px;
      font-size:13px;
      line-height:1.55;
      color:rgba(223,255,232,.92);
    }
    .texty{
      width:100%;
      box-sizing:border-box;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.40);
      color:rgba(223,255,232,.95);
      padding:12px;
      font:inherit;
      outline:none;
    }
    
    /* ============================
   PHASE VISUALS
   Phase 1: Nostromo CRT Console
   ============================ */

html[data-phase="1"]{
  /* warmer phosphor */
  --crt-green: rgba(57,255,106,.95);
  --crt-glowA: 0 0 10px rgba(57,255,106,.14);
  --crt-glowB: 0 0 22px rgba(57,255,106,.20);
}

/* slightly warmer overall tone */
html[data-phase="1"] body{
  background:
    radial-gradient(900px 600px at 60% 10%, rgba(57,255,106,.14), transparent 60%),
    radial-gradient(700px 520px at 15% 30%, rgba(0,0,0,.40), transparent 60%),
    linear-gradient(180deg, #020404, #040707);
}

/* cards feel more like ship terminals */
html[data-phase="1"] .card{
  border-radius: 10px;
  box-shadow: 0 18px 44px rgba(0,0,0,.72);
}

/* buttons: chunkier + more “industrial” */
html[data-phase="1"] button{
  border-radius: 6px;
  border-color: rgba(57,255,106,.16);
  letter-spacing: .18em;
  text-transform: uppercase;
  box-shadow: inset 0 0 0 1px rgba(57,255,106,.08);
}
html[data-phase="1"] button:hover{
  box-shadow: var(--crt-glowA), inset 0 0 0 1px rgba(57,255,106,.12);
}

/* the big PING button looks like a terminal key */
html[data-phase="1"] button.big{
  border-radius: 8px;
  background:
    linear-gradient(180deg, rgba(57,255,106,.18), rgba(0,0,0,.44));
  box-shadow:
    inset 0 0 0 1px rgba(57,255,106,.16),
    0 14px 34px rgba(0,0,0,.55),
    0 0 18px rgba(57,255,106,.10);
}

/* make the scanlines slightly stronger + add grain */
html[data-phase="1"] .fx.scanlines{
  opacity: .22;
}
html[data-phase="1"] body::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: .06;
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.06),
      rgba(255,255,255,.06) 1px,
      rgba(0,0,0,0) 3px,
      rgba(0,0,0,0) 7px
    ),
    radial-gradient(900px 700px at 50% 40%, rgba(57,255,106,.08), transparent 60%);
  mix-blend-mode: screen;
  animation: crtNoise 1.9s steps(2) infinite;
}

@keyframes crtNoise{
  0%{ transform: translate3d(0,0,0); opacity:.05; }
  35%{ transform: translate3d(-.4px,.2px,0); opacity:.065; }
  65%{ transform: translate3d(.3px,-.3px,0); opacity:.055; }
  100%{ transform: translate3d(0,0,0); opacity:.06; }
}

/* subtle “status LED” flicker on the dot */
html[data-phase="1"] .dot{
  background: var(--accent);
  box-shadow: 0 0 10px rgba(57,255,106,.30), 0 0 22px rgba(57,255,106,.18);
  animation: ledFlicker 3.6s infinite;
}
@keyframes ledFlicker{
  0%, 100%{ opacity: .95; filter: saturate(1.05); }
  42%{ opacity: .70; }
  44%{ opacity: .92; }
  78%{ opacity: .78; }
}

/* tiny CRT “breathing” on headings */
html[data-phase="1"] h1{
  text-shadow: 0 0 12px rgba(57,255,106,.10), 0 0 18px rgba(57,255,106,.06);
}


/* =========================================================
   PHASE 1: NOSTROMO GREEN / Cold Boot Terminal
   Uses: html[data-phase="1"] hook set by setPhase()
   ========================================================= */

html[data-phase="1"] body{
  background:
    radial-gradient(900px 600px at 60% 10%, rgba(57,255,106,.12), transparent 62%),
    radial-gradient(700px 520px at 15% 30%, rgba(0,0,0,.38), transparent 60%),
    linear-gradient(180deg, #020404, #040707);
  filter: saturate(1.05) contrast(1.04);
}

/* Slightly “thicker terminal glass” */
html[data-phase="1"] .card{
  border-color: rgba(160,255,210,.18);
  box-shadow: 0 16px 42px rgba(0,0,0,.78);
}

html[data-phase="1"] .card::after{
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.04),
    inset 0 0 34px rgba(0,0,0,.62);
}

/* Terminal typography: a bit tighter, more “ship console” */
html[data-phase="1"] h1{
  letter-spacing: .34em;
  text-shadow: 0 0 10px rgba(57,255,106,.10);
}

/* Buttons: squarer + heavier borders (Phase 1 identity) */
html[data-phase="1"] button{
  border-radius: 8px;
  border-color: rgba(223,255,232,.14);
  background: rgba(0,0,0,.38);
  box-shadow: inset 0 0 0 1px rgba(57,255,106,.06);
}
html[data-phase="1"] button:hover{
  box-shadow: 0 0 16px rgba(57,255,106,.14), inset 0 0 0 1px rgba(57,255,106,.10);
}
html[data-phase="1"] button:active{
  transform: translateY(1px);
}

/* Big ping button: chunkier “console key” */
html[data-phase="1"] .big{
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(57,255,106,.12), rgba(0,0,0,.42));
  box-shadow:
    inset 0 0 0 1px rgba(57,255,106,.18),
    0 12px 30px rgba(0,0,0,.52);
}

/* Chips: tighter and more “label tape” */
html[data-phase="1"] .chip{
  border-radius: 10px;
  border-color: rgba(255,255,255,.10);
  background: rgba(0,0,0,.44);
}

/* One slow system “heartbeat” LED (subtle, not alarm-y) */
@keyframes p1Heartbeat{
  0%, 86% { opacity: .55; filter: brightness(.9); }
  90%     { opacity: 1;   filter: brightness(1.25); }
  94%     { opacity: .7;  filter: brightness(1.0); }
  100%    { opacity: .55; filter: brightness(.9); }
}
html[data-phase="1"] .dot{
  animation: p1Heartbeat 7.8s infinite;
}

/* Scanlines: slightly stronger in Phase 1 */
html[data-phase="1"] .fx.scanlines{
  opacity: .18;
}

/* Scope: “static sea” feel (less glossy, more CRT) */
html[data-phase="1"] .scopeWrap{
  border-color: rgba(255,255,255,.10);
  background: rgba(0,0,0,.48);
}
html[data-phase="1"] canvas#scope{
  background: rgba(0,0,0,.34);
}

/* Corruption bar stays quiet in Phase 1: reduce drama */
html[data-phase="1"] .fill.danger{
  box-shadow: 0 0 10px rgba(255,59,107,.14);
}

/* Popups: look like terminal overlays */
html[data-phase="1"] .pop{
  border-radius: 10px;
  border-color: rgba(57,255,106,.22);
  background: rgba(0,0,0,.86);
}
    
    /* =========================================================
   PHASE VISUALS (via <html data-phase="...">)
   Phase 1: Nostromo-ish green CRT console
   ========================================================= */

/* Base per-phase tokens */
:root{
  --crtGreen: rgba(57,255,106,0.12);
  --crtGreen2: rgba(57,255,106,0.06);
  --crtLine: rgba(57,255,106,0.08);
  --crtText: rgba(223,255,232,0.92);
  --crtShadow: 0 14px 34px rgba(0,0,0,.78);
}

/* PHASE 1 hook */
html[data-phase="1"] body{
  background:
    radial-gradient(900px 600px at 60% 10%, rgba(57,255,106,.12), transparent 60%),
    radial-gradient(700px 520px at 15% 30%, rgba(0,0,0,.35), transparent 60%),
    linear-gradient(180deg, #020404, #040707);
}

/* Make scanlines feel more “CRT”, less “Instagram filter” */
html[data-phase="1"] .fx.scanlines{
  opacity: .20;
  mix-blend-mode: screen;
  filter: contrast(1.05) brightness(1.05);
}

/* Add subtle phosphor grain + glow halo in Phase 1 */
html[data-phase="1"] body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  background:
    radial-gradient(900px 700px at 50% 40%, rgba(57,255,106,.08), transparent 65%),
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.018),
      rgba(255,255,255,.018) 1px,
      rgba(0,0,0,0) 3px,
      rgba(0,0,0,0) 6px
    );
  opacity:.55;
  mix-blend-mode: screen;
}

/* Cards become more “industrial console plate” */
html[data-phase="1"] .card{
  border: 1px solid rgba(57,255,106,.18);
  box-shadow: var(--crtShadow);
  background:
    linear-gradient(180deg, rgba(0,0,0,.70), rgba(0,0,0,.40)),
    radial-gradient(1200px 800px at 50% 0%, rgba(57,255,106,.08), transparent 60%);
}
html[data-phase="1"] .card::after{
  box-shadow:
    inset 0 0 0 1px rgba(57,255,106,.06),
    inset 0 0 26px rgba(0,0,0,.65);
}

/* Header strip: more panel-y */
html[data-phase="1"] .hd{
  background:
    linear-gradient(180deg, rgba(57,255,106,.10), rgba(0,0,0,0));
  border-bottom: 1px solid rgba(57,255,106,.14);
}

/* Buttons: squarer, “terminal key” vibe */
html[data-phase="1"] button{
  border-radius: 8px;
  border: 1px solid rgba(57,255,106,.18);
  background:
    linear-gradient(180deg, rgba(57,255,106,.08), rgba(0,0,0,.35));
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.04),
    0 10px 18px rgba(0,0,0,.45);
}
html[data-phase="1"] button:hover{
  box-shadow:
    0 0 18px rgba(57,255,106,.18),
    inset 0 0 0 1px rgba(57,255,106,.10);
}
html[data-phase="1"] button:active{
  transform: translateY(1px);
  filter: brightness(0.98);
}

/* Big “PING” should feel like a main console key */
html[data-phase="1"] .big{
  border-radius: 10px;
  letter-spacing: .18em;
  background:
    linear-gradient(180deg, rgba(57,255,106,.16), rgba(0,0,0,.42));
  box-shadow:
    inset 0 0 0 1px rgba(57,255,106,.18),
    0 14px 30px rgba(0,0,0,.55);
}

/* Chips: more like status LEDs */
html[data-phase="1"] .chip{
  border: 1px solid rgba(57,255,106,.14);
  background: rgba(0,0,0,.44);
}
html[data-phase="1"] .dot{
  box-shadow: 0 0 22px rgba(57,255,106,.38);
}

/* Text: slight CRT bloom */
html[data-phase="1"] body,
html[data-phase="1"] .stat .v,
html[data-phase="1"] .muted{
  text-shadow: 0 0 10px rgba(57,255,106,.10);
}

/* Scope: make it look like a little embedded monitor */
html[data-phase="1"] .scopeWrap{
  border: 1px solid rgba(57,255,106,.16);
  background: rgba(0,0,0,.46);
}
html[data-phase="1"] canvas#scope{
  background:
    radial-gradient(500px 120px at 40% 40%, rgba(57,255,106,.10), transparent 70%),
    rgba(0,0,0,.28);
}
    @keyframes ledPulse {
  0%, 92%, 100% { filter: brightness(1); opacity: .96; }
  94% { filter: brightness(1.3); opacity: 1; }
  96% { filter: brightness(1.1); opacity: .98; }
}

/* subtle “console heartbeat” */
html[data-phase="1"] #status,
html[data-phase="1"] #syncChip{
  animation: ledPulse 5.2s infinite;
}
/* ============================
   PHASE 1 — CRT MONOCHROME
   ============================ */

html[data-phase="1"]{
  --text: #39FF6A;                /* primary phosphor green */
  --muted: rgba(57,255,106,.72);  /* dimmer phosphor */
  --border: rgba(57,255,106,.22);
}

/* All body text */
html[data-phase="1"] body{
  color: var(--text);
}

/* Headings */
html[data-phase="1"] h1,
html[data-phase="1"] .subtitle{
  color: var(--text);
  text-shadow:
    0 0 6px rgba(57,255,106,.35),
    0 0 14px rgba(57,255,106,.18);
}

/* General UI text */
html[data-phase="1"] .muted{
  color: var(--muted);
}

/* Stat values */
html[data-phase="1"] .stat .v{
  color: var(--text);
  text-shadow:
    0 0 8px rgba(57,255,106,.28);
}

/* Chips (PHASE / STATUS / SYNC etc) */
html[data-phase="1"] .chip{
  color: var(--text);
  border-color: rgba(57,255,106,.28);
  background: rgba(0,0,0,.45);
  text-shadow: 0 0 6px rgba(57,255,106,.25);
}

/* Logs */
html[data-phase="1"] .log p{
  color: var(--text);
}

/* Log tags */
html[data-phase="1"] .tag{
  color: var(--text);
  border-color: rgba(57,255,106,.28);
}


  </style>
</head>

<body>
  <div class="fx scanlines"></div>
  <div class="popHost" id="popHost" aria-live="polite"></div>

  <!-- Modal -->
  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal">
      <div class="modalHd">
        <div class="modalTitle" id="modalTitle">DIALOG</div>
        <button id="modalClose" style="padding:10px 12px">CLOSE</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
    </div>
  </div>

  <div class="wrap">
    <!-- Phase 0 Onboarding Transmission -->
<section class="card" id="onboardCard" style="display:none;">
  <div class="hd">
    <div>CONTROL TRANSMISSION</div>
    <div class="muted" id="onboardStep">STEP 1/4</div>
  </div>
  <div class="pad">
    <div class="muted" id="onboardText" style="font-size:13px; line-height:1.65;"></div>
    <div style="height:12px"></div>
    <div class="grid2">
      <button id="onboardNext">ACK / NEXT</button>
      <button id="onboardSkip">SKIP</button>
    </div>
  </div>
</section>
    
    <!-- Header / HUD -->
    <header class="card">
      <div class="pad">
        <h1>SYGN1L</h1>
        <div class="subtitle" id="subtitle">THE ARRAY LISTENS. THE VOID REPLIES IN ARITHMETIC.</div>

        <div class="stats">
          <div class="stat"><div class="k">SIGNAL</div><div class="v" id="signal">0</div></div>
          <div class="stat"><div class="k">SIGNAL/SEC</div><div class="v" id="sps">0</div></div>
          <div class="stat"><div class="k">PHASE</div><div class="v" id="phaseTint">P1</div></div>
        </div>

        <div class="scopeWrap">
          <div class="scopeTop">
            <div>ARRAY SCOPE</div>
            <div class="scopeMeta" id="scopeLabel">LOCK: 0%</div>
          </div>
          <canvas id="scope"></canvas>
        </div>

        <div style="height:10px"></div>

        <div class="stat">
          <div class="k">CORRUPTION</div>
          <div class="bar"><div class="fill danger" id="corrFill"></div></div>
          <div class="muted" id="corrText">0% (DORMANT)</div>
        </div>
      </div>
    </header>

<!-- Upgrades -->
    <section class="card">
      <div class="hd">
        <div>BUFFS</div>
        <div class="muted">Available buffs glow. Locked buffs show requirements.</div>
      </div>
      <div class="pad">
        <div class="upgrades" id="upgrades"></div>
      </div>
    </section>

    <!-- Control Panel -->
    <section class="card">
      <div class="hd">
        <div>
          <span class="chip"><span class="dot"></span><span id="phase">PHASE 1</span></span>
          <span class="chip" id="status">ARRAY: STABLE</span>
          <span class="chip" id="buildChip">BUILD: 1</span>
          <span class="chip" id="relicChip">RELICS: 0</span>
        </div>
        <div>
          <span class="chip" id="syncChip">SYNC: LOCAL</span>
          <span class="chip clickable" id="userChip" title="Tap to edit username">USER: GUEST</span>
        </div>
      </div>

      <div class="pad">
        <button class="big" id="ping">PING VOID</button>

        <div class="grid2">
          <button id="saveBtn">SAVE</button>
          <button id="wipeBtn">WIPE</button>
        </div>

        <div class="grid2">
          <button id="riteBtn" disabled>RITE</button>
          <button id="fbBtn">FEEDBACK</button>
        </div>

        <div class="grid2">
          <button id="aiBtn">AI COMMS</button>
          <span class="chip" id="aiChip">AI: OFF</span>
        </div>

        <div class="grid2">
          <button id="helpBtn">MANUAL</button>
          <span class="chip" id="authStatus">STATUS: NOT SIGNED IN</span>
        </div>

        <div class="muted" id="objective">
          OBJECTIVE: Tap PING VOID, then buy DISH to start passive Signal/sec.
        </div>
      </div>
    </section>

    

    <!-- Comms -->
    <section class="card">
      <div class="hd">
        <div>COMMUNICATIONS</div>
        <div class="muted">Tap popups to close.</div>
      </div>
      <div class="pad">
        <div class="log" id="comms"></div>
      </div>
    </section>

    <!-- Log -->
    <section class="card">
      <div class="hd">
        <div>TRANSMISSION LOG</div>
        <div class="muted">Milestones reveal context.</div>
      </div>
      <div class="pad">
        <div class="log" id="log"></div>
      </div>
    </section>

    <!-- Auth -->
    <section class="card">
      <div class="hd">
        <div>ACCOUNT</div>
        <div class="muted">Email/password for cross-device cloud saves.</div>
      </div>
      <div class="pad">
        <input class="texty" id="email" placeholder="EMAIL" inputmode="email" autocomplete="email" />
        <div style="height:10px"></div>
        <input class="texty" id="pass" placeholder="PASSWORD" type="password" autocomplete="current-password" />
        <div class="grid2">
          <button id="signUpBtn">SIGN UP</button>
          <button id="signInBtn">SIGN IN</button>
        </div>
        <div class="grid2">
          <button id="signOutBtn" disabled>SIGN OUT</button>
          <button id="whoBtn">WHOAMI</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
(function(){
  function showFatal(msg){
    console.error(msg);
    var host = document.getElementById("popHost");
    if(!host) return;
    var box = document.createElement("div");
    box.className = "pop";
    box.innerHTML =
      '<div class="who">BOOT</div>' +
      '<div class="msg">JS ERROR: ' + String(msg).replace(/</g,"&lt;") + '</div>' +
      '<div class="hint">Tap to close</div>';
    box.addEventListener("click", function(){ box.remove(); });
    host.prepend(box);
  }
  window.addEventListener("error", function(e){ showFatal(e && e.message ? e.message : e); });
  window.addEventListener("unhandledrejection", function(e){
    var r = e && e.reason ? (e.reason.message || e.reason) : e;
    showFatal(r);
  });

  // also prove whether ANY JS is alive
  document.addEventListener("DOMContentLoaded", function(){
    var host = document.getElementById("popHost");
    if(host){
      var box = document.createElement("div");
      box.className = "pop";
      box.innerHTML = '<div class="who">BOOT</div><div class="msg">HTML loaded. Waiting for modules…</div><div class="hint">Tap to close</div>';
      box.addEventListener("click", function(){ box.remove(); });
      host.prepend(box);
    }
  });
})();
</script>
  <!-- Game entry point (ES module) -->
  <script type="module" src="./js/main.js"></script>
</body>
</html>